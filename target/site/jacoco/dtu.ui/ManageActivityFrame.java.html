<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="da"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ManageActivityFrame.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">ExamProject</a> &gt; <a href="index.source.html" class="el_package">dtu.ui</a> &gt; <span class="el_source">ManageActivityFrame.java</span></div><h1>ManageActivityFrame.java</h1><pre class="source lang-java linenums">package dtu.ui;

import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

import dtu.app.*;
import dtu.domain.*;
import dtu.ui.frameInFrames.*;

public class ManageActivityFrame {
    private JFrame manageActivityFrame;

<span class="nc" id="L14">    public ManageActivityFrame(App app, Activity activity) {</span>
<span class="nc" id="L15">        Project project = activity.getProject();</span>

        // Create the login frame
<span class="nc" id="L18">        manageActivityFrame = new JFrame(&quot;Login&quot;);</span>
<span class="nc" id="L19">        manageActivityFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span>
<span class="nc" id="L20">        manageActivityFrame.setSize(1000, 700);</span>

        // Header panel
<span class="nc" id="L23">        JPanel header = new JPanel();</span>
<span class="nc" id="L24">        header.setBackground(Color.GRAY);</span>
<span class="nc" id="L25">        header.setPreferredSize(new Dimension(1000, 80));</span>
<span class="nc" id="L26">        header.setLayout(new BorderLayout());</span>

<span class="nc" id="L28">        JLabel dropdownLabel = new JLabel(&quot;&quot;);</span>
<span class="nc" id="L29">        ImageIcon originalIcon = new ImageIcon(getClass().getResource(&quot;/dtu/icons/Account.png&quot;));</span>
<span class="nc" id="L30">        Image scaledImage = originalIcon.getImage().getScaledInstance(64, 64, Image.SCALE_SMOOTH);</span>
<span class="nc" id="L31">        ImageIcon scaledIcon = new ImageIcon(scaledImage);</span>
<span class="nc" id="L32">        dropdownLabel.setIcon(scaledIcon);</span>
<span class="nc" id="L33">        header.add(dropdownLabel, BorderLayout.WEST);</span>

<span class="nc" id="L35">        JPanel dropdownContainer = new JPanel();</span>
<span class="nc" id="L36">        dropdownContainer.setLayout(new GridLayout(3, 1)); // 3 rows, 1 column</span>
<span class="nc" id="L37">        dropdownContainer.setBounds(0, 80, 150, 75);</span>
<span class="nc" id="L38">        dropdownContainer.setBackground(Color.LIGHT_GRAY);</span>
<span class="nc" id="L39">        dropdownContainer.setVisible(false); // Initially hidden</span>
<span class="nc" id="L40">        manageActivityFrame.add(dropdownContainer); // Add the container to the frame</span>

        // Create the dropdown items
<span class="nc" id="L43">        JButton activityOverviewButton = new JButton(&quot;Activities&quot;);</span>
<span class="nc" id="L44">        activityOverviewButton.addActionListener(e -&gt; {</span>
<span class="nc" id="L45">            System.out.println(&quot;Activities clicked&quot;);</span>
<span class="nc" id="L46">            ActivityOverviewFrame activityOverviewFrame = new ActivityOverviewFrame(app);</span>
<span class="nc" id="L47">            manageActivityFrame.setVisible(false);</span>
<span class="nc" id="L48">            manageActivityFrame.dispose();</span>
<span class="nc" id="L49">        });</span>
<span class="nc" id="L50">        activityOverviewButton.setBounds(0, 0, 150, 25);</span>
<span class="nc" id="L51">        dropdownContainer.add(activityOverviewButton);</span>

<span class="nc" id="L53">        JButton projectOverviewButton = new JButton(&quot;Projects&quot;);</span>
<span class="nc" id="L54">        projectOverviewButton.addActionListener(e -&gt; {</span>
<span class="nc" id="L55">            System.out.println(&quot;Projects clicked&quot;);</span>
<span class="nc" id="L56">            ProjectOverviewFrame manageProjectsFrame = new ProjectOverviewFrame(app);</span>
<span class="nc" id="L57">            manageActivityFrame.setVisible(false);</span>
<span class="nc" id="L58">            manageActivityFrame.dispose();</span>
<span class="nc" id="L59">        });</span>
<span class="nc" id="L60">        projectOverviewButton.setBounds(0, 50, 150, 25);</span>
<span class="nc" id="L61">        dropdownContainer.add(projectOverviewButton);</span>

<span class="nc" id="L63">        JButton logoutButton = new JButton(&quot;Logout&quot;);</span>
<span class="nc" id="L64">        logoutButton.addActionListener(e -&gt; {</span>
<span class="nc" id="L65">            System.out.println(&quot;Logged out&quot;);</span>
<span class="nc" id="L66">            LoginFrame loginFrame = new LoginFrame(app);</span>
<span class="nc" id="L67">            manageActivityFrame.setVisible(false);</span>
<span class="nc" id="L68">            manageActivityFrame.dispose();</span>
<span class="nc" id="L69">        });</span>
<span class="nc" id="L70">        logoutButton.setBounds(0, 100, 150, 25);</span>
<span class="nc" id="L71">        dropdownContainer.add(logoutButton);</span>

        // Add MouseListener to the label
<span class="nc" id="L74">        dropdownLabel.addMouseListener(new MouseAdapter() {</span>
            @Override
            public void mouseEntered(MouseEvent e) {
<span class="nc" id="L77">                dropdownContainer.setVisible(true); // Show the container on hover</span>
<span class="nc" id="L78">            }</span>

            @Override
            public void mouseExited(MouseEvent e) {
                // Check if the mouse is still inside the dropdownContainer
<span class="nc" id="L83">                Point mouseLocation = MouseInfo.getPointerInfo().getLocation();</span>
<span class="nc" id="L84">                SwingUtilities.convertPointFromScreen(mouseLocation, dropdownContainer);</span>
<span class="nc bnc" id="L85" title="All 2 branches missed.">                if (!dropdownContainer.contains(mouseLocation)) {</span>
<span class="nc" id="L86">                    dropdownContainer.setVisible(false); // Hide the container if the mouse is outside</span>
                }
<span class="nc" id="L88">            }</span>
        });

        // Add MouseListener to the container
<span class="nc" id="L92">        dropdownContainer.addMouseListener(new MouseAdapter() {</span>
            @Override
            public void mouseEntered(MouseEvent e) {
<span class="nc" id="L95">                dropdownContainer.setVisible(true); // Keep the container visible on hover</span>
<span class="nc" id="L96">            }</span>

            @Override
            public void mouseExited(MouseEvent e) {
                // Check if the mouse is still inside the dropdownLabel
<span class="nc" id="L101">                Point mouseLocation = MouseInfo.getPointerInfo().getLocation();</span>
<span class="nc" id="L102">                SwingUtilities.convertPointFromScreen(mouseLocation, dropdownLabel);</span>
<span class="nc bnc" id="L103" title="All 2 branches missed.">                if (!dropdownLabel.contains(mouseLocation)) {</span>
<span class="nc" id="L104">                    dropdownContainer.setVisible(false); // Hide the container if the mouse is outside</span>
                }
<span class="nc" id="L106">            }</span>
        });

<span class="nc" id="L109">        JLabel title = new JLabel(&quot;Project &quot; + project.getProjectNumber() + &quot; - &quot; + activity.getName());</span>
<span class="nc" id="L110">        title.setForeground(Color.BLACK);</span>
<span class="nc" id="L111">        title.setFont(title.getFont().deriveFont(40f));</span>
<span class="nc" id="L112">        title.setHorizontalAlignment(SwingConstants.CENTER);</span>
<span class="nc" id="L113">        header.add(title, BorderLayout.CENTER);</span>
<span class="nc" id="L114">        manageActivityFrame.add(header, BorderLayout.NORTH);</span>

<span class="nc" id="L116">        JLabel addLabel = new JLabel();</span>
<span class="nc" id="L117">        originalIcon = new ImageIcon(getClass().getResource(&quot;/dtu/icons/plusSign.png&quot;));</span>
<span class="nc" id="L118">        scaledImage = originalIcon.getImage().getScaledInstance(64, 64, Image.SCALE_SMOOTH);</span>
<span class="nc" id="L119">        scaledIcon = new ImageIcon(scaledImage);</span>
<span class="nc" id="L120">        addLabel.setIcon(scaledIcon);</span>
<span class="nc" id="L121">        header.add(addLabel, BorderLayout.EAST);</span>

<span class="nc" id="L123">        JPanel addDropdownContainer = new JPanel();</span>
<span class="nc" id="L124">        addDropdownContainer.setLayout(new GridLayout(5, 1)); // 3 rows, 1 column</span>
<span class="nc" id="L125">        addDropdownContainer.setBounds(850, 80, 150, 125);</span>
<span class="nc" id="L126">        addDropdownContainer.setBackground(Color.LIGHT_GRAY);</span>
<span class="nc" id="L127">        addDropdownContainer.setVisible(false); // Initially hidden</span>
<span class="nc" id="L128">        manageActivityFrame.add(addDropdownContainer); // Add the container to the frame</span>

        // Create the dropdown items
<span class="nc" id="L131">        JButton updateStatus = new JButton(&quot;Update status&quot;);</span>
<span class="nc" id="L132">        updateStatus.addActionListener(e -&gt; {</span>
<span class="nc" id="L133">            System.out.println(&quot;Update Status clicked&quot;);</span>
<span class="nc" id="L134">            SetStatusFrame setStatusFrame = new SetStatusFrame(app, activity);</span>
            // Add a WindowListener to detect when CreateProjectFrame is closed
<span class="nc" id="L136">            setStatusFrame.addWindowListener(new WindowAdapter() {</span>
                @Override
                public void windowClosed(WindowEvent e) {
<span class="nc" id="L139">                    refreshFrame(app, activity); // Refresh the ProjectOverviewFrame</span>
<span class="nc" id="L140">                }</span>
            });
<span class="nc" id="L142">        });</span>
<span class="nc" id="L143">        addDropdownContainer.add(updateStatus);</span>

<span class="nc" id="L145">        JButton editActivity = new JButton(&quot;Edit activity&quot;);</span>
<span class="nc" id="L146">        editActivity.addActionListener(e -&gt; {</span>
<span class="nc" id="L147">            System.out.println(&quot;Edit activity clicked&quot;);</span>
<span class="nc" id="L148">            EditActivityFrame editActivityFrame = new EditActivityFrame(app, activity);</span>
            // Add a WindowListener to detect when CreateProjectFrame is closed
<span class="nc" id="L150">            editActivityFrame.addWindowListener(new WindowAdapter() {</span>
                @Override
                public void windowClosed(WindowEvent e) {
<span class="nc" id="L153">                    refreshFrame(app, activity); // Refresh the ProjectOverviewFrame</span>
<span class="nc" id="L154">                }</span>
            });
<span class="nc" id="L156">        });</span>
<span class="nc" id="L157">        addDropdownContainer.add(editActivity);</span>

<span class="nc" id="L159">        JButton registerTime = new JButton(&quot;Register time&quot;);</span>
<span class="nc" id="L160">        registerTime.addActionListener(e -&gt; {</span>
<span class="nc" id="L161">            System.out.println(&quot;Register Time clicked&quot;);</span>
<span class="nc" id="L162">            RegisterTimeFrame registerTimeFrame = new RegisterTimeFrame(app, activity);</span>
            // Add a WindowListener to detect when CreateProjectFrame is closed
<span class="nc" id="L164">            registerTimeFrame.addWindowListener(new WindowAdapter() {</span>
                @Override
                public void windowClosed(WindowEvent e) {
<span class="nc" id="L167">                    refreshFrame(app, activity); // Refresh the ProjectOverviewFrame</span>
<span class="nc" id="L168">                }</span>
            });
<span class="nc" id="L170">        });</span>
<span class="nc" id="L171">        addDropdownContainer.add(registerTime);</span>

<span class="nc" id="L173">        JButton addDeveloper = new JButton(&quot;Add developer&quot;);</span>
<span class="nc" id="L174">        addDeveloper.addActionListener(e -&gt; {</span>
<span class="nc" id="L175">            System.out.println(&quot;Add Developer clicked&quot;);</span>
<span class="nc" id="L176">            AddDeveloperFrame addDeveloperFrame = new AddDeveloperFrame(app, activity);</span>
            // Add a WindowListener to detect when CreateProjectFrame is closed
<span class="nc" id="L178">            addDeveloperFrame.addWindowListener(new WindowAdapter() {</span>
                @Override
                public void windowClosed(WindowEvent e) {
<span class="nc" id="L181">                    refreshFrame(app, activity); // Refresh the ProjectOverviewFrame</span>
<span class="nc" id="L182">                }</span>
            });
<span class="nc" id="L184">        });</span>
<span class="nc" id="L185">        addDropdownContainer.add(addDeveloper);</span>

<span class="nc" id="L187">        JButton removeDeveloper = new JButton(&quot;Remove developer&quot;);</span>
<span class="nc" id="L188">        removeDeveloper.addActionListener(e -&gt; {</span>
<span class="nc" id="L189">            System.out.println(&quot;Remove Developer clicked&quot;);</span>
<span class="nc" id="L190">            RemoveDeveloperFrame removeDeveloperFrame = new RemoveDeveloperFrame(app, activity);</span>
            // Add a WindowListener to detect when CreateProjectFrame is closed
<span class="nc" id="L192">            removeDeveloperFrame.addWindowListener(new WindowAdapter() {</span>
                @Override
                public void windowClosed(WindowEvent e) {
<span class="nc" id="L195">                    refreshFrame(app, activity); // Refresh the ProjectOverviewFrame</span>
<span class="nc" id="L196">                }</span>
            });
<span class="nc" id="L198">        });</span>
<span class="nc" id="L199">        addDropdownContainer.add(removeDeveloper);</span>

        // Add MouseListener to the label
<span class="nc" id="L202">        addLabel.addMouseListener(new MouseAdapter() {</span>
            @Override
            public void mouseEntered(MouseEvent e) {
<span class="nc" id="L205">                addDropdownContainer.setVisible(true); // Show the container on hover</span>
<span class="nc" id="L206">            }</span>

            @Override
            public void mouseExited(MouseEvent e) {
                // Check if the mouse is still inside the addDropdownContainer
<span class="nc" id="L211">                Point mouseLocation = MouseInfo.getPointerInfo().getLocation();</span>
<span class="nc" id="L212">                SwingUtilities.convertPointFromScreen(mouseLocation, addDropdownContainer);</span>
<span class="nc bnc" id="L213" title="All 2 branches missed.">                if (!addDropdownContainer.contains(mouseLocation)) {</span>
<span class="nc" id="L214">                    addDropdownContainer.setVisible(false); // Hide the container if the mouse is outside</span>
                }
<span class="nc" id="L216">            }</span>
        });

        // Add MouseListener to the container
<span class="nc" id="L220">        addDropdownContainer.addMouseListener(new MouseAdapter() {</span>
            @Override
            public void mouseEntered(MouseEvent e) {
<span class="nc" id="L223">                addDropdownContainer.setVisible(true); // Keep the container visible on hover</span>
<span class="nc" id="L224">            }</span>

            @Override
            public void mouseExited(MouseEvent e) {
                // Check if the mouse is still inside the addLabel
<span class="nc" id="L229">                Point mouseLocation = MouseInfo.getPointerInfo().getLocation();</span>
<span class="nc" id="L230">                SwingUtilities.convertPointFromScreen(mouseLocation, addLabel);</span>
<span class="nc bnc" id="L231" title="All 2 branches missed.">                if (!addLabel.contains(mouseLocation)) {</span>
<span class="nc" id="L232">                    addDropdownContainer.setVisible(false); // Hide the container if the mouse is outside</span>
                }
<span class="nc" id="L234">            }</span>
        });

        // Main panel
<span class="nc" id="L238">        JPanel main = new JPanel();</span>
<span class="nc" id="L239">        main.setLayout(new BorderLayout());</span>
<span class="nc" id="L240">        manageActivityFrame.add(main, BorderLayout.CENTER);</span>
<span class="nc" id="L241">        main.setBackground(Color.WHITE);</span>

        // Status panel
<span class="nc" id="L244">        JPanel statusPanel = new JPanel(new GridLayout(3, 1));</span>
<span class="nc" id="L245">        statusPanel.setBorder(BorderFactory.createCompoundBorder(</span>
<span class="nc" id="L246">            BorderFactory.createEmptyBorder(20, 20, 20, 20), // Outer padding</span>
<span class="nc" id="L247">            BorderFactory.createLineBorder(Color.GRAY, 1)    // Optional: Add a border for better visibility</span>
        ));

<span class="nc" id="L250">        JLabel statusTitle = new JLabel(&quot;Status&quot;);</span>
<span class="nc" id="L251">        statusTitle.setFont(statusTitle.getFont().deriveFont(40f));</span>
<span class="nc" id="L252">        statusTitle.setHorizontalAlignment(SwingConstants.CENTER);</span>
<span class="nc" id="L253">        statusPanel.add(statusTitle);</span>

<span class="nc" id="L255">        JLabel dateLabel = new JLabel(activity.getWeekPlan()[0] + &quot;/&quot; + activity.getYearPlan()[0] + &quot; - &quot; +</span>
<span class="nc" id="L256">            activity.getWeekPlan()[1] + &quot;/&quot; + activity.getYearPlan()[1]);</span>
<span class="nc" id="L257">        dateLabel.setHorizontalAlignment(SwingConstants.CENTER);</span>
<span class="nc" id="L258">        dateLabel.setFont(dateLabel.getFont().deriveFont(20f));</span>
<span class="nc" id="L259">        statusPanel.add(dateLabel);</span>

<span class="nc" id="L261">        JLabel statusLabel = new JLabel(activity.getStatus().toString() + &quot; - &quot; + activity.getTimeSpent() + &quot;/&quot; + activity.getTimeBudget());</span>
<span class="nc" id="L262">        statusLabel.setHorizontalAlignment(SwingConstants.CENTER);</span>
<span class="nc" id="L263">        statusLabel.setFont(statusLabel.getFont().deriveFont(20f));</span>
<span class="nc" id="L264">        statusPanel.add(statusLabel);</span>
<span class="nc" id="L265">        main.add(statusPanel, BorderLayout.NORTH);</span>

        // Developer panel
<span class="nc" id="L268">        JPanel developerPanel = new JPanel();</span>
<span class="nc" id="L269">        developerPanel.setLayout(new BorderLayout()); // Use BorderLayout for better control</span>
<span class="nc" id="L270">        developerPanel.setBorder(BorderFactory.createCompoundBorder(</span>
<span class="nc" id="L271">            BorderFactory.createEmptyBorder(20, 20, 300, 20), // Outer padding</span>
<span class="nc" id="L272">            BorderFactory.createLineBorder(Color.GRAY, 1)    // Optional: Add a border for better visibility</span>
        ));

<span class="nc" id="L275">        JLabel developerTitle = new JLabel(&quot;Developers&quot;);</span>
<span class="nc" id="L276">        developerTitle.setHorizontalAlignment(SwingConstants.CENTER);</span>
<span class="nc" id="L277">        developerTitle.setFont(developerTitle.getFont().deriveFont(40f));</span>
<span class="nc" id="L278">        developerPanel.add(developerTitle, BorderLayout.NORTH); // Add title to the top</span>

<span class="nc" id="L280">        JPanel developerListPanel = new JPanel(new FlowLayout(FlowLayout.CENTER)); // Dynamic rows</span>
<span class="nc bnc" id="L281" title="All 2 branches missed.">        for (Developer developer : activity.getAssignedDevelopers()) {</span>
<span class="nc" id="L282">            JLabel developerLabel = new JLabel(developer.getInitials() + &quot;  &quot;);</span>
<span class="nc" id="L283">            developerLabel.setFont(developerLabel.getFont().deriveFont(20f));</span>
<span class="nc" id="L284">            developerListPanel.add(developerLabel);</span>
<span class="nc" id="L285">        }</span>
<span class="nc" id="L286">        developerPanel.add(developerListPanel, BorderLayout.CENTER); // Add list to the center</span>

        // Add the developer panel to the main panel
<span class="nc" id="L289">        main.add(developerPanel, BorderLayout.CENTER);</span>

        
        // Finalize frame
<span class="nc" id="L293">        manageActivityFrame.setLocationRelativeTo(null); // Center the frame on the screen</span>
<span class="nc" id="L294">        manageActivityFrame.setResizable(false);</span>
<span class="nc" id="L295">        manageActivityFrame.setVisible(true);</span>
<span class="nc" id="L296">    }</span>

    private void refreshFrame(App app, Activity activity) {
<span class="nc" id="L299">        manageActivityFrame.setVisible(false);</span>
<span class="nc" id="L300">        manageActivityFrame.dispose();</span>
<span class="nc" id="L301">        ManageActivityFrame manageActivityFrame = new ManageActivityFrame(app, activity);</span>
<span class="nc" id="L302">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>