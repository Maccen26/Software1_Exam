<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="da"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ProjectOverviewFrame.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">ExamProject</a> &gt; <a href="index.source.html" class="el_package">dtu.ui</a> &gt; <span class="el_source">ProjectOverviewFrame.java</span></div><h1>ProjectOverviewFrame.java</h1><pre class="source lang-java linenums">package dtu.ui;

import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.awt.geom.Line2D;
import java.util.ArrayList;

import dtu.app.*;
import dtu.domain.*;
import dtu.ui.*;
import dtu.ui.frameInFrames.*;

public class ProjectOverviewFrame {
<span class="nc" id="L15">    private JFrame projectOverviewFrame = new JFrame(&quot;Manage Projects&quot;);</span>

<span class="nc" id="L17">    ArrayList&lt;Color&gt; colors = new ArrayList&lt;Color&gt;();</span>
    {
<span class="nc" id="L19">        colors.add(Color.PINK);</span>
<span class="nc" id="L20">        colors.add(Color.RED);</span>
<span class="nc" id="L21">        colors.add(Color.GREEN);</span>
<span class="nc" id="L22">        colors.add(Color.BLUE);</span>
<span class="nc" id="L23">        colors.add(Color.YELLOW);</span>
<span class="nc" id="L24">        colors.add(Color.CYAN);</span>
<span class="nc" id="L25">        colors.add(Color.MAGENTA);</span>
<span class="nc" id="L26">        colors.add(Color.ORANGE);</span>
    }

    private JPanel createProjectPanel(Project project, App app){
<span class="nc" id="L30">        JPanel projectPanel = new JPanel();</span>
<span class="nc" id="L31">        projectPanel.setLayout(new BorderLayout());</span>
<span class="nc" id="L32">        projectPanel.setPreferredSize(new Dimension(1000, 100));</span>
        
<span class="nc" id="L34">        JButton projectButton = new JButton(project.getProjectNumber());</span>
<span class="nc" id="L35">        projectButton.setPreferredSize(new Dimension(200, 200));</span>
<span class="nc" id="L36">        projectButton.setFont(projectButton.getFont().deriveFont(40f));</span>
<span class="nc" id="L37">        projectButton.setHorizontalAlignment(SwingConstants.CENTER);</span>
<span class="nc" id="L38">        String number = project.getProjectNumber();</span>
<span class="nc" id="L39">        int nr = Integer.parseInt(number.substring(4, number.length()));</span>
<span class="nc" id="L40">        projectButton.setBorderPainted(false);</span>
<span class="nc" id="L41">        projectButton.setOpaque(true);</span>
<span class="nc" id="L42">        projectButton.setBackground(colors.get(nr % colors.size()));</span>

<span class="nc" id="L44">        projectButton.addActionListener(e -&gt; {</span>
<span class="nc" id="L45">            System.out.println(&quot;Project &quot; + project.getProjectNumber() + &quot; clicked&quot;);</span>
<span class="nc" id="L46">            ManageProjectFrame manageProjectFrame = new ManageProjectFrame(app, project);</span>
<span class="nc" id="L47">            projectOverviewFrame.setVisible(false);</span>
<span class="nc" id="L48">            projectOverviewFrame.dispose();</span>
<span class="nc" id="L49">        });</span>

<span class="nc" id="L51">        projectPanel.add(projectButton, BorderLayout.CENTER);</span>
<span class="nc" id="L52">        return projectPanel;</span>
    }

<span class="nc" id="L55">    public ProjectOverviewFrame(App app) {</span>
        // Set up the frame
<span class="nc" id="L57">        projectOverviewFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span>
<span class="nc" id="L58">        projectOverviewFrame.setSize(1000, 700);</span>
<span class="nc" id="L59">        projectOverviewFrame.setLayout(new BorderLayout());</span>
<span class="nc" id="L60">        projectOverviewFrame.setLocationRelativeTo(null); // Center the frame on the screen</span>
<span class="nc" id="L61">        projectOverviewFrame.setResizable(false);</span>

        // (1) Create your header panel however you like:
<span class="nc" id="L64">        JPanel header = new JPanel();</span>
<span class="nc" id="L65">        header.setBackground(Color.GRAY);</span>
<span class="nc" id="L66">        header.setPreferredSize(new Dimension(1000, 80));   // height = 80px</span>
<span class="nc" id="L67">        header.setLayout(new BorderLayout()); // 1 row, 3 columns</span>

        
<span class="nc" id="L70">        JLabel dropdownLabel = new JLabel(&quot;&quot;);</span>
<span class="nc" id="L71">        ImageIcon originalIcon = new ImageIcon(getClass().getResource(&quot;/dtu/icons/Account.png&quot;));</span>
<span class="nc" id="L72">        Image scaledImage = originalIcon.getImage().getScaledInstance(64, 64, Image.SCALE_SMOOTH);</span>
<span class="nc" id="L73">        ImageIcon scaledIcon = new ImageIcon(scaledImage);</span>
<span class="nc" id="L74">        dropdownLabel.setIcon(scaledIcon);</span>
<span class="nc" id="L75">        header.add(dropdownLabel, BorderLayout.WEST);</span>

<span class="nc" id="L77">        JPanel dropdownContainer = new JPanel();</span>
<span class="nc" id="L78">        dropdownContainer.setLayout(new BorderLayout());</span>
        // dropdownContainer.setPreferredSize(new Dimension(300, 200));
<span class="nc" id="L80">        dropdownContainer.setBounds(0, 80, 150, 50);</span>
<span class="nc" id="L81">        dropdownContainer.setBackground(Color.LIGHT_GRAY);</span>
<span class="nc" id="L82">        dropdownContainer.setVisible(false); // Initially hidden</span>
<span class="nc" id="L83">        projectOverviewFrame.add(dropdownContainer); // Add the container to the frame</span>

        // Create the dropdown items
<span class="nc" id="L86">        JButton manageProjectsButton = new JButton(&quot;Activities&quot;);</span>
<span class="nc" id="L87">        manageProjectsButton.addActionListener(e -&gt; {</span>
<span class="nc" id="L88">            System.out.println(&quot;Activities clicked&quot;);</span>
<span class="nc" id="L89">            ActivityOverviewFrame activityOverviewFrame = new ActivityOverviewFrame(app);</span>
<span class="nc" id="L90">            projectOverviewFrame.setVisible(false);</span>
<span class="nc" id="L91">            projectOverviewFrame.dispose();</span>
<span class="nc" id="L92">        });</span>
<span class="nc" id="L93">        manageProjectsButton.setBounds(0, 0, 150, 25);</span>
<span class="nc" id="L94">        dropdownContainer.add(manageProjectsButton, BorderLayout.NORTH);</span>

<span class="nc" id="L96">        JButton logoutButton = new JButton(&quot;Logout&quot;);</span>
<span class="nc" id="L97">        logoutButton.addActionListener(e -&gt; {</span>
<span class="nc" id="L98">            System.out.println(&quot;Logged out&quot;);</span>
<span class="nc" id="L99">            LoginFrame loginFrame = new LoginFrame(app);</span>
<span class="nc" id="L100">            projectOverviewFrame.setVisible(false);</span>
<span class="nc" id="L101">            projectOverviewFrame.dispose();</span>
<span class="nc" id="L102">        });</span>
<span class="nc" id="L103">        logoutButton.setBounds(0, 50, 150, 25);</span>
<span class="nc" id="L104">        dropdownContainer.add(logoutButton, BorderLayout.SOUTH);</span>

        // Add MouseListener to the label
<span class="nc" id="L107">        dropdownLabel.addMouseListener(new MouseAdapter() {</span>
            @Override
            public void mouseEntered(MouseEvent e) {
<span class="nc" id="L110">                dropdownContainer.setVisible(true); // Show the container on hover</span>
<span class="nc" id="L111">            }</span>

            @Override
            public void mouseExited(MouseEvent e) {
                // Check if the mouse is still inside the dropdownContainer
<span class="nc" id="L116">                Point mouseLocation = MouseInfo.getPointerInfo().getLocation();</span>
<span class="nc" id="L117">                SwingUtilities.convertPointFromScreen(mouseLocation, dropdownContainer);</span>
<span class="nc bnc" id="L118" title="All 2 branches missed.">                if (!dropdownContainer.contains(mouseLocation)) {</span>
<span class="nc" id="L119">                    dropdownContainer.setVisible(false); // Hide the container if the mouse is outside</span>
                }
<span class="nc" id="L121">            }</span>
        });

        // Add MouseListener to the container
<span class="nc" id="L125">        dropdownContainer.addMouseListener(new MouseAdapter() {</span>
            @Override
            public void mouseEntered(MouseEvent e) {
<span class="nc" id="L128">                dropdownContainer.setVisible(true); // Keep the container visible on hover</span>
<span class="nc" id="L129">            }</span>

            @Override
            public void mouseExited(MouseEvent e) {
                // Check if the mouse is still inside the dropdownLabel
<span class="nc" id="L134">                Point mouseLocation = MouseInfo.getPointerInfo().getLocation();</span>
<span class="nc" id="L135">                SwingUtilities.convertPointFromScreen(mouseLocation, dropdownLabel);</span>
<span class="nc bnc" id="L136" title="All 2 branches missed.">                if (!dropdownLabel.contains(mouseLocation)) {</span>
<span class="nc" id="L137">                    dropdownContainer.setVisible(false); // Hide the container if the mouse is outside</span>
                }
<span class="nc" id="L139">            }</span>
        });
        
<span class="nc" id="L142">        JLabel title = new JLabel(&quot;Projects&quot;);</span>
<span class="nc" id="L143">        title.setForeground(Color.BLACK);</span>
<span class="nc" id="L144">        title.setFont(title.getFont().deriveFont(40f));</span>
<span class="nc" id="L145">        title.setHorizontalAlignment(SwingConstants.CENTER);</span>
<span class="nc" id="L146">        header.add(title, BorderLayout.CENTER);</span>

<span class="nc" id="L148">        JLabel addLabel = new JLabel();</span>
<span class="nc" id="L149">        originalIcon = new ImageIcon(getClass().getResource(&quot;/dtu/icons/plusSign.png&quot;));</span>
<span class="nc" id="L150">        scaledImage = originalIcon.getImage().getScaledInstance(64, 64, Image.SCALE_SMOOTH);</span>
<span class="nc" id="L151">        scaledIcon = new ImageIcon(scaledImage);</span>
<span class="nc" id="L152">        addLabel.setIcon(scaledIcon);</span>
<span class="nc" id="L153">        header.add(addLabel, BorderLayout.EAST);</span>

<span class="nc" id="L155">        JPanel addDropdownContainer = new JPanel();</span>
<span class="nc" id="L156">        addDropdownContainer.setLayout(new GridLayout(2, 1)); // 3 rows, 1 column</span>
<span class="nc" id="L157">        addDropdownContainer.setBounds(850, 80, 150, 50);</span>
<span class="nc" id="L158">        addDropdownContainer.setBackground(Color.LIGHT_GRAY);</span>
<span class="nc" id="L159">        addDropdownContainer.setVisible(false); // Initially hidden</span>
<span class="nc" id="L160">        projectOverviewFrame.add(addDropdownContainer); // Add the container to the frame</span>

        // Create the dropdown items
<span class="nc" id="L163">        JButton createProject = new JButton(&quot;Create project&quot;);</span>
<span class="nc" id="L164">        createProject.addActionListener(e -&gt; {</span>
<span class="nc" id="L165">            System.out.println(&quot;Create project clicked&quot;);</span>
<span class="nc" id="L166">            CreateProjectFrame createProjectFrame = new CreateProjectFrame(app);</span>
            
            // Add a WindowListener to detect when CreateProjectFrame is closed
<span class="nc" id="L169">            createProjectFrame.addWindowListener(new WindowAdapter() {</span>
                @Override
                public void windowClosed(WindowEvent e) {
<span class="nc" id="L172">                    refreshFrame(app); // Refresh the ProjectOverviewFrame</span>
<span class="nc" id="L173">                }</span>
            });
<span class="nc" id="L175">        });</span>
<span class="nc" id="L176">        createProject.setBounds(0, 0, 150, 25);</span>
<span class="nc" id="L177">        addDropdownContainer.add(createProject);</span>

<span class="nc" id="L179">        JButton createActivity = new JButton(&quot;Create activity&quot;);</span>
<span class="nc" id="L180">        createActivity.addActionListener(e -&gt; {</span>
<span class="nc" id="L181">            System.out.println(&quot;Create activity clicked&quot;);</span>
<span class="nc" id="L182">            CreateActivityFrame createActivityFrame = new CreateActivityFrame(app, null);</span>
<span class="nc" id="L183">        });</span>
<span class="nc" id="L184">        createActivity.setBounds(0, 50, 150, 25);</span>
<span class="nc" id="L185">        addDropdownContainer.add(createActivity);</span>

        // Add MouseListener to the label
<span class="nc" id="L188">        addLabel.addMouseListener(new MouseAdapter() {</span>
            @Override
            public void mouseEntered(MouseEvent e) {
<span class="nc" id="L191">                addDropdownContainer.setVisible(true); // Show the container on hover</span>
<span class="nc" id="L192">            }</span>

            @Override
            public void mouseExited(MouseEvent e) {
                // Check if the mouse is still inside the addDropdownContainer
<span class="nc" id="L197">                Point mouseLocation = MouseInfo.getPointerInfo().getLocation();</span>
<span class="nc" id="L198">                SwingUtilities.convertPointFromScreen(mouseLocation, addDropdownContainer);</span>
<span class="nc bnc" id="L199" title="All 2 branches missed.">                if (!addDropdownContainer.contains(mouseLocation)) {</span>
<span class="nc" id="L200">                    addDropdownContainer.setVisible(false); // Hide the container if the mouse is outside</span>
                }
<span class="nc" id="L202">            }</span>
        });

        // Add MouseListener to the container
<span class="nc" id="L206">        addDropdownContainer.addMouseListener(new MouseAdapter() {</span>
            @Override
            public void mouseEntered(MouseEvent e) {
<span class="nc" id="L209">                addDropdownContainer.setVisible(true); // Keep the container visible on hover</span>
<span class="nc" id="L210">            }</span>

            @Override
            public void mouseExited(MouseEvent e) {
                // Check if the mouse is still inside the addLabel
<span class="nc" id="L215">                Point mouseLocation = MouseInfo.getPointerInfo().getLocation();</span>
<span class="nc" id="L216">                SwingUtilities.convertPointFromScreen(mouseLocation, addLabel);</span>
<span class="nc bnc" id="L217" title="All 2 branches missed.">                if (!addLabel.contains(mouseLocation)) {</span>
<span class="nc" id="L218">                    addDropdownContainer.setVisible(false); // Hide the container if the mouse is outside</span>
                }
<span class="nc" id="L220">            }</span>
        });

        // (2) Add it to the top (NORTH) of the frame:
<span class="nc" id="L224">        projectOverviewFrame.add(header, BorderLayout.NORTH);</span>


        // (3) Add your main content in CENTER:
<span class="nc" id="L228">        JPanel main = new JPanel();</span>
<span class="nc" id="L229">        projectOverviewFrame.add(main, BorderLayout.CENTER);</span>

        // Search functionality
        // JPanel searchContainer = new JPanel();
        // searchContainer.setLayout(new FlowLayout(FlowLayout.LEFT));

        // JLabel searchIcon = new JLabel();
        // ImageIcon searchOriginalIcon = new ImageIcon(getClass().getResource(&quot;/dtu/icons/Search.png&quot;));
        // Image searchScaledImage = searchOriginalIcon.getImage().getScaledInstance(30, 30, Image.SCALE_SMOOTH);
        // ImageIcon searchScaledIcon = new ImageIcon(searchScaledImage);
        // searchIcon.setIcon(searchScaledIcon);
        // searchContainer.add(searchIcon);
        
        // JTextField searchField = new JTextField();
        // searchField.setPreferredSize(new Dimension(200, 30));
        // searchField.addFocusListener(new FocusAdapter() {
        //     @Override
        //     public void focusGained(java.awt.event.FocusEvent e) {
        //         if (searchField.getText().equals(&quot;Search for activity&quot;)) {
        //             searchField.setText(&quot;&quot;);
        //             searchField.setForeground(Color.BLACK);
        //         }
        //     }
        //     @Override
        //     public void focusLost(java.awt.event.FocusEvent e) {
        //         if (searchField.getText().isEmpty()) {
        //             searchField.setText(&quot;Search for activity&quot;);
        //             searchField.setForeground(Color.GRAY);
        //         }
        //     }
        // });
        // searchContainer.add(searchField);

        // JButton searchButton = new JButton(&quot;Search&quot;);
        // searchButton.addActionListener(e -&gt; {
        //     String searchText = searchField.getText();
        //     System.out.println(&quot;Search for: &quot; + searchText);
        //     // Add your action here
        // });
        // searchContainer.add(searchButton);
        // main.add(searchContainer, BorderLayout.NORTH);
        
        // Create a container for projects
<span class="nc" id="L272">        double projectCount = app.getProjects().size();</span>
<span class="nc" id="L273">        int rows = (int) Math.ceil(projectCount / 3.0);</span>
<span class="nc" id="L274">        JPanel projectContainer = new JPanel(new GridLayout(rows, 4, 20, 20));</span>
<span class="nc" id="L275">        projectContainer.setPreferredSize(new Dimension(1000, rows * 100));</span>
<span class="nc" id="L276">        projectContainer.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));</span>
<span class="nc" id="L277">        int i = 0;</span>
<span class="nc bnc" id="L278" title="All 2 branches missed.">        for (Project project : app.getProjects()) {</span>
<span class="nc bnc" id="L279" title="All 2 branches missed.">            if (i == 15){</span>
<span class="nc" id="L280">                break;</span>
            }
<span class="nc" id="L282">            i++;</span>
            // if (project.getStatus().equals(&quot;Finished&quot;)) {
            //     continue;
            // }
<span class="nc" id="L286">            JPanel projectPanel = createProjectPanel(project, app);</span>
<span class="nc" id="L287">            projectContainer.add(projectPanel);</span>
<span class="nc" id="L288">        }</span>
<span class="nc" id="L289">        main.add(projectContainer, BorderLayout.CENTER);</span>
        
<span class="nc" id="L291">        projectOverviewFrame.setVisible(true);</span>
<span class="nc" id="L292">    }</span>
    
    private void refreshFrame(App app) {
<span class="nc" id="L295">        projectOverviewFrame.setVisible(false);</span>
<span class="nc" id="L296">        projectOverviewFrame.dispose();</span>
<span class="nc" id="L297">        new ProjectOverviewFrame(app);</span>
<span class="nc" id="L298">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>